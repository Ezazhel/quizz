(this.webpackJsonpquizzdiscord=this.webpackJsonpquizzdiscord||[]).push([[0],{78:function(e,t,n){e.exports=n(93)},83:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(30),l=n.n(s),r=(n(83),n(7)),o=n(103),u=n(102),c=n(76),m=n(29),d=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(o.a,{bg:"dark",variant:"dark"},i.a.createElement(o.a.Brand,{as:m.b,to:"/"}," ","Rift's Quizz"," "),i.a.createElement(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(o.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(c.a,{className:"mr-auto"},i.a.createElement(u.a,{title:"Admin",id:"admin-dropdown"},i.a.createElement(u.a.Item,{as:m.b,to:"/admin/themesQuestions"}," ","Th\xe8mes et Questions"," "),i.a.createElement(u.a.Item,{as:m.b,to:"/admin/equipes"}," ","Equipes"," "))))))},h=n(9),p=n(16),v=n(18),f=n(17),b=n(25),E=n(101),g=n(67),q=n(98),T=n(99),x=n(73),O=n(13),S=n(6),j=n(32),k=n.n(j),w=function e(t){var n=t.name,a=t.id,i=t.score,s=void 0===i?0:i;Object(h.a)(this,e),this.name=n,this.id=a,this.score=s},y=function(){var e;return null!==(e=JSON.parse(localStorage.getItem("equipes")))&&void 0!==e?e:{}},I=n(19),N=n(20);function Q(){var e=Object(I.a)(["\n    display: flex;\n    flex-direction: column;\n    flex-grow: 2;\n    border-radius: 5px;\n    min-height: 50vh;\n\n    -webkit-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.4);\n    -moz-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.4);\n    box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.4);\n\n    .initialize {\n        margin: auto;\n    }\n"]);return Q=function(){return e},e}function C(){var e=Object(I.a)(["\n    border: none;\n    &.cash {\n        background: #7e349d;\n    }\n    &.duo {\n        background: #f1c40f;\n    }\n    &.carre {\n        background: #c0392b;\n    }\n"]);return C=function(){return e},e}function B(){var e=Object(I.a)(["\n    display: flex;\n    justify-content: space-between;\n    margin: 0.2em 0.2em;\n    border-radius: 5px;\n    background-color: #5c6a79;\n    -webkit-box-shadow: 0px 0px 5px 0px rgba(127, 140, 141, 0.4);\n    -moz-box-shadow: 0px 0px 5px 0px rgba(127, 140, 141, 0.4);\n    box-shadow: 0px 0px 5px 0px rgba(127, 140, 141, 0.4);\n\n    &:hover {\n        cursor: pointer;\n        label {\n            color: #aeb2b7;\n        }\n        background-color: #005b50;\n    }\n    &.active {\n        label {\n            color: #ecf0f1;\n        }\n        background-color: #005b50;\n    }\n\n    label {\n        color: #bdc3c7;\n        margin-left: 1.2em;\n        font-size: 1.2em;\n        font-weigth: 400;\n        display: flex;\n        flex-grow: 1;\n        justify-content: space-between;\n        align-items: center;\n        margin-bottom: 0px;\n    }\n    button {\n        display: flex;\n    }\n"]);return B=function(){return e},e}function F(){var e=Object(I.a)(["\n    display: flex;\n    flex-direction: column;\n    flex-grow: 1;\n\n    label {\n        color: #24b9b6;\n        font-size: 1.2em;\n        font-weight: 400;\n    }\n"]);return F=function(){return e},e}var A=N.a.div(F()),R=N.a.div(B()),z=Object(N.a)(g.a)(C()),P=N.a.div(Q()),L=function(e){var t,n,a,s;return i.a.createElement("div",null,i.a.createElement("h3",null," Listes des \xe9quipes "),i.a.createElement(b.b,{initialValues:{name:null!==(t=null===(n=e.equipe)||void 0===n?void 0:n.name)&&void 0!==t?t:"",id:null!==(a=null===(s=e.equipe)||void 0===s?void 0:s.id)&&void 0!==a?a:null},enableReinitialize:!0,onSubmit:e.submit},(function(e){var t=e.values,n=e.handleSubmit,a=e.isSubmitting;return i.a.createElement(E.a,{onSubmit:n,inline:!0,className:"m-4"},i.a.createElement(E.a.Group,null,i.a.createElement(E.a.Label,null,"Nom de l'\xe9quipe"),i.a.createElement(E.a.Control,{as:b.a,name:"name",required:!0,className:"ml-2 mr-2"})),i.a.createElement(g.a,{disabled:a,type:"submit",variant:"outline-success"},null===t.id?"Cr\xe9er":"Editer"))})))},J=function(e){return i.a.createElement(A,null,Object.keys(e.equipes).map((function(t){var n;return i.a.createElement(M,{equipe:e.equipes[t],key:t,isActive:(null===(n=e.selectedEquipe)||void 0===n?void 0:n.id)===t,deleteEquipe:e.deleteEquipe,selectEquipe:e.selectEquipe})})))},M=function(e){return i.a.createElement(R,{className:e.isActive?"active":"",onClick:function(){return e.selectEquipe(e.equipe)}},i.a.createElement("label",null,e.equipe.name),i.a.createElement(g.a,{variant:"danger",type:"button",onClick:function(t){return e.deleteEquipe(e.equipe.id,t)}},"X"))},G=function(e){Object(v.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).createOrUpdateEquipe=function(t,n){!function(e){var t,n,a=y();e=new w({id:null!==(t=null===(n=e)||void 0===n?void 0:n.id)&&void 0!==t?t:k()(),name:e.name}),a=Object(S.a)(Object(S.a)({},a),{},Object(O.a)({},e.id,e)),localStorage.setItem("equipes",JSON.stringify(a))}(t),e.setState({equipes:y(),selectedEquipe:null}),n.setSubmitting(!1),n.resetForm()},e.deleteEquipe=function(t,n){var a;n.stopPropagation(),function(e){var t=y();delete t[e],localStorage.setItem("equipes",JSON.stringify(t))}(t),e.setState({equipes:y(),selectedEquipe:t===(null===(a=e.state.selectedEquipe)||void 0===a?void 0:a.id)?null:e.state.selectedEquipe})},e.selectEquipe=function(t){var n;e.setState({selectedEquipe:t.id===(null===(n=e.state.selectedEquipe)||void 0===n?void 0:n.id)?null:t})},e.state={equipes:y(),selectedEquipe:null},e}return Object(p.a)(n,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(q.a,null,i.a.createElement(T.a,null,i.a.createElement(x.a,null,i.a.createElement(L,{equipe:this.state.selectedEquipe,submit:this.createOrUpdateEquipe}),i.a.createElement(J,{selectedEquipe:this.state.selectedEquipe,equipes:this.state.equipes,deleteEquipe:this.deleteEquipe,selectEquipe:this.selectEquipe})))))}}]),n}(i.a.Component),V=n(42);function D(){var e=Object(I.a)(["\n    font-size: 1.2em;\n    font-weight: 400;\n"]);return D=function(){return e},e}function X(){var e=Object(I.a)(["\n    width: 90%;\n    text-align: left;\n    padding-top: 2em;\n    padding-bottom: 2em;\n\n    @media (min-width: 786px) {\n        width: 50%;\n    }\n"]);return X=function(){return e},e}function U(){var e=Object(I.a)(["\n    background: #5c6a79;\n    height: auto;\n    width: 90%;\n    border-radius: 5px;\n    margin: 5em auto;\n    color: snow;\n    -webkit-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.4);\n    -moz-box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.4);\n    box-shadow: 0px 0px 5px 0px rgba(0, 0, 0, 0.4);\n\n    @media (min-width: 786px) {\n        width: 60%;\n    }\n\n    label {\n        color: #bdc3c7;\n        font-size: 1.2em;\n        font-weight: 400;\n    }\n\n    h1 {\n        color: #bdc3c7;\n        padding-top: 0.5em;\n    }\n\n    .form-group {\n        margin-bottom: 2.5em;\n    }\n"]);return U=function(){return e},e}var H=N.a.div(U()),W=Object(N.a)(E.a)(X()),K=Object(N.a)(g.a)(D()),Y=function(e){var t,n,a,s,l,r,o,u;return i.a.createElement(H,null,i.a.createElement(g.a,null," Importation des questions de ce th\xe8me"),i.a.createElement(b.b,{initialValues:{question:null!==(t=null===(n=e.question)||void 0===n?void 0:n.question)&&void 0!==t?t:"",questionId:null!==(a=null===(s=e.question)||void 0===s?void 0:s.id)&&void 0!==a?a:null,bonneReponse:null!==(l=null===(r=e.question)||void 0===r?void 0:r.bonneReponse)&&void 0!==l?l:"",autreReponses:null!==(o=null===(u=e.question)||void 0===u?void 0:u.autreReponses)&&void 0!==o?o:"",themeId:e.selectedTheme.id},enableReinitialize:!0,onSubmit:e.submit},(function(t){var n=t.values,a=t.handleChange,s=t.handleBlur,l=t.handleSubmit,r=t.isSubmitting;return i.a.createElement(W,{className:"mx-auto",onSubmit:l},i.a.createElement(E.a.Group,{controlId:"formTheme"},i.a.createElement(E.a.Label,null,i.a.createElement("h5",null,"Th\xe8me : ",e.selectedTheme.name))),i.a.createElement(E.a.Group,{controlId:"formQuestion"},i.a.createElement(E.a.Label,null,"Question :"),i.a.createElement(E.a.Control,{as:"textarea",name:"question",placeholder:"Le texte de ta question, ce qui va s'afficher \xe0 l'\xe9cran des joueurs",onChange:a,required:!0,onBlur:s,value:n.question})),i.a.createElement(E.a.Group,{controlId:"formBonneReponse"},i.a.createElement(E.a.Label,null,"Bonne r\xe9ponse :"),i.a.createElement(E.a.Control,{as:b.a,name:"bonneReponse",required:!0,placeholder:"Pas de secret, \xe9cris la bonne r\xe9ponse"})),i.a.createElement(E.a.Group,{controlId:"formAutreReponses"},i.a.createElement(E.a.Label,null,"Autres r\xe9ponses :"),i.a.createElement(E.a.Control,{as:b.a,name:"autreReponses",placeholder:"S\xe9pare les r\xe9ponses par des ';'",required:!0})),i.a.createElement(K,{type:"submit",variant:"outline-success",disabled:r},null!==n.questionId?"Editer la question":"Ajouter la question au th\xe8me"))})))},Z=function(e){return i.a.createElement("div",null,i.a.createElement("h3",null," Question du th\xe8me"),e.questions.length>0?i.a.createElement(A,null,e.questions.map((function(t,n){var a;return i.a.createElement(R,{key:t.id,className:(null===(a=e.selectedQuestion)||void 0===a?void 0:a.id)===t.id?"active":"",onClick:function(){return e.editQuestion(t)}},i.a.createElement("label",null,"Question : ",++n),i.a.createElement(g.a,{onClick:function(){return e.deleteQuestion(t)},variant:"danger"},"X"))}))):"Pas encore de Questions")},$=n(104),_=function(e){return i.a.createElement(R,{className:" ".concat(e.isActive?"active":""),onClick:e.selectTheme},i.a.createElement("label",null,e.theme.name),i.a.createElement(g.a,{className:"align-self-end",variant:"danger",onClick:function(t){return e.deleteTheme(e.theme,t)}},"X"))},ee=function(e){return i.a.createElement("div",null,i.a.createElement("h3",null," Listes des Th\xe8mes ")," ",i.a.createElement(g.a,{onClick:e.importThemes}," Importation des th\xe8mes"),i.a.createElement("div",null,i.a.createElement(b.b,{initialValues:{theme:""},onSubmit:e.addTheme},(function(e){var t=e.handleSubmit,n=e.isSubmitting;return i.a.createElement(E.a,{onSubmit:t,inline:!0,className:"m-4"},i.a.createElement(E.a.Group,null,i.a.createElement(E.a.Control,{as:b.a,name:"theme",className:"ml-2 mr-2",placeholder:"Nom du th\xe8me",required:!0})),i.a.createElement(g.a,{disabled:n,type:"submit",variant:"outline-success"},"Ajouter un Th\xe8me"))}))),i.a.createElement(A,null,Object.keys(e.themes).map((function(t){return i.a.createElement(_,{theme:e.themes[t],key:t,isActive:null!==e.selectedTheme&&e.selectedTheme.id===t,selectTheme:function(){return e.selectTheme(e.themes[t])},deleteTheme:e.deleteTheme})}))),i.a.createElement($.a,{as:"ul"}))},te=function e(t){var n=t.id,a=t.question,i=t.bonneReponse,s=t.autreReponses,l=t.themeId;Object(h.a)(this,e),console.log("const question",n),this.id=n,this.question=a,this.bonneReponse=i,this.autreReponses=s,this.themeId=l},ne=function(e){var t,n,a=null!==(t=JSON.parse(localStorage.getItem("questions")))&&void 0!==t?t:{};return Object.keys(null!==(n=a[e])&&void 0!==n?n:{}).map((function(t){return a[e][t]}))},ae=function e(t,n){Object(h.a)(this,e),this.id=t,this.name=n},ie=function(){var e;return null!==(e=JSON.parse(localStorage.getItem("themes")))&&void 0!==e?e:{}},se=function(e){Object(v.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).addTheme=function(t,n){!function(e){var t=ie(),n=e.id,a=e.name,i=new ae(null!==n&&void 0!==n?n:k()(),a);t[i.id]=i,localStorage.setItem("themes",JSON.stringify(t))}({name:t.theme,id:e.state.themes.length}),e.setState({themes:ie()}),n.setSubmitting(!1),n.resetForm()},e.addQuestionToTheme=function(t,n){!function(e){var t,n,a=null!==(t=JSON.parse(localStorage.getItem("questions")))&&void 0!==t?t:{};e.id=null!==(n=null===e||void 0===e?void 0:e.id)&&void 0!==n?n:k()();var i=new te(Object(S.a)({},e));a=Object(S.a)(Object(S.a)({},a),{},Object(O.a)({},i.themeId,Object(S.a)(Object(S.a)({},a[i.themeId]),{},Object(O.a)({},i.id,i)))),localStorage.setItem("questions",JSON.stringify(a))}({themeId:t.themeId,id:t.questionId,question:t.question,bonneReponse:t.bonneReponse,autreReponses:t.autreReponses}),e.setState({questions:Object(V.a)(ne(t.themeId)),selectedQuestion:null}),n.setSubmitting(!1),n.resetForm()},e.selectTheme=function(t){var n,a;e.setState({selectedQuestion:(null===(n=e.state.selectedQuestion)||void 0===n?void 0:n.themeId)!==t.id?null:e.state.selectedQuestion,selectedTheme:t.id===(null===(a=e.state.selectedTheme)||void 0===a?void 0:a.id)?null:t,questions:Object(V.a)(ne(t.id))})},e.editQuestion=function(t){var n;e.setState({selectedQuestion:(null===(n=e.state.selectedQuestion)||void 0===n?void 0:n.id)===t.id?null:t})},e.deleteQuestion=function(t){var n,a;console.log(t),function(e){var t=e.themeId,n=e.id,a=JSON.parse(localStorage.getItem("questions"));delete a[t][n],localStorage.setItem("questions",JSON.stringify(a))}(t),e.setState({questions:ne(t.themeId),selectedQuestion:t.id===(null===(n=e.state)||void 0===n||null===(a=n.selectedQuestion)||void 0===a?void 0:a.id)?null:e.state.selectedQuestion})},e.deleteTheme=function(t,n){var a,i;n.stopPropagation(),function(e){try{var t=ie();delete t[e.id],localStorage.setItem("themes",JSON.stringify(t))}catch(n){}}(t),function(e){var t=JSON.parse(localStorage.getItem("questions"));delete t[e],localStorage.setItem("questions",JSON.stringify(t))}(t.id),e.setState({themes:ie(),selectedQuestion:(null===(a=e.state.selectedQuestion)||void 0===a?void 0:a.themeId)===t.id?null:e.state.selectedQuestion,selectedTheme:t.id===(null===(i=e.state.selectedTheme)||void 0===i?void 0:i.id)?null:e.state.selectedTheme})},e.importThemes=function(){!function(e){if(!e)return alert("Vous devez sp\xe9cifier du texte");try{var t,n=e.split(";"),a=null!==(t=JSON.parse(localStorage.getItem("themes")))&&void 0!==t?t:{};n.forEach((function(e){if(!e)return alert("Le texte ne correspond pas au mod\xe8le");var t=new ae(k()(),e);a[t.id]=t})),localStorage.setItem("themes",JSON.stringify(a))}catch(i){return console.log(i),alert("Le JSON n'est pas un objet")}}(prompt()),e.setState({themes:ie()})},e.state={themes:ie(),questions:[],selectedQuestion:null,selectedTheme:null},e}return Object(p.a)(n,[{key:"render",value:function(){return i.a.createElement(q.a,{fluid:!0},i.a.createElement(T.a,null,i.a.createElement(x.a,{md:"3",className:"mx-auto"},i.a.createElement(ee,{importThemes:this.importThemes,selectedTheme:this.state.selectedTheme,themes:this.state.themes,selectTheme:this.selectTheme,addTheme:this.addTheme,deleteTheme:this.deleteTheme})),null!==this.state.selectedTheme&&i.a.createElement(i.a.Fragment,null,i.a.createElement(x.a,null,i.a.createElement(Y,{submit:this.addQuestionToTheme,selectedTheme:this.state.selectedTheme,question:this.state.selectedQuestion})),i.a.createElement(x.a,{md:"2"},i.a.createElement(Z,{selectedQuestion:this.state.selectedQuestion,editQuestion:this.editQuestion,deleteQuestion:this.deleteQuestion,questions:this.state.questions})))))}}]),n}(i.a.Component),le=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(r.c,null,i.a.createElement(r.a,{exact:!0,path:"/admin/themesQuestions",component:se}),i.a.createElement(r.a,{exact:!0,path:"/admin/equipes",component:G})))},re=n(100),oe=function(e){return i.a.createElement("div",{className:"d-flex flex-column flex-grow-1 align-content-center p-3"},i.a.createElement(A,null,Object.keys(e.equipes).sort((function(t,n){return e.equipes[n].score-e.equipes[t].score})).map((function(t,n){var a;return i.a.createElement(R,{key:e.equipes[t].name,onClick:function(){return e.selectEquipe(e.equipes[t])},className:(null===(a=e.selectedEquipe)||void 0===a?void 0:a.id)===t?"active":""},i.a.createElement("label",null,i.a.createElement("span",null,e.equipes[t].name),i.a.createElement(re.a,{variant:"warning",className:"p-2 align-middle"},e.equipes[t].score)),[1,-1].map((function(n){return i.a.createElement(g.a,{key:n,"data-id-equipe":t,"data-value":n,variant:n>0?"outline-success":"outline-danger",onClick:e.giveBonusOrMalusSelectedEquipe},t>0?"+":"","+1")})))}))))},ue=function(e,t,n){return n[e].name>n[t].name?1:n[t].name>n[e].name?-1:0},ce=function(e){return i.a.createElement(A,null,Object.keys(e.themesToPickFrom).sort((function(t,n){return ue(t,n,e.themesToPickFrom)})).map((function(t,n){return i.a.createElement(R,{key:t,onClick:function(){return!e.isBuilding&&e.selectTheme(e.themesToPickFrom[t])}},i.a.createElement("label",null,e.themesToPickFrom[t].name),e.isBuilding&&i.a.createElement(g.a,{variant:"danger",onClick:function(){return e.removeThemeFromList(t)}},"X"))})),Object.keys(e.themesToPickFrom).length>0&&e.isBuilding&&i.a.createElement(g.a,{variant:"outline-success",onClick:e.finalizeBuilding},"Finaliser la liste"))},me=function(e){return e.isBuilding?i.a.createElement("select",{onChange:e.addBuildingThemes,value:"",className:"form-control"},i.a.createElement("option",{value:"",disabled:!0},"Au clique sur un th\xe8me, celui-ci est choisi"),Object.keys(e.allThemes).sort((function(t,n){return ue(t,n,e.allThemes)})).map((function(t,n){return i.a.createElement("option",{key:t,value:t},e.allThemes[t].name)}))):i.a.createElement(g.a,{variant:"outline-primary",onClick:e.setIsBuilding},"Cr\xe9ation listes des th\xe8mes")},de=function(e){Object(v.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this)).removeThemeFromList=function(e){var t=Object(S.a)(Object(S.a)({},a.state.allThemes),{},Object(O.a)({},e,a.state.themesToPickFrom[e])),n=a.state.themesToPickFrom;delete n[e],a.setState({themesToPickFrom:n,allThemes:t})},a.addBuildingThemes=function(e){var t=e.target.value;a.setState({themesToPickFrom:Object(S.a)(Object(S.a)({},a.state.themesToPickFrom),{},Object(O.a)({},t,a.state.allThemes[t]))},(function(){var e=a.state.allThemes;delete e[t],a.setState({allThemes:e})}))},a.setIsBuilding=function(){a.setState({isBuilding:!0})},a.finalizeBuilding=function(){a.setState({isBuilding:!1,choixTheme:!1})},a.displayThemes=function(){a.setState({choixTheme:!0})},a.selectTheme=function(e){delete a.state.themesToPickFrom[e.id],a.setState({choixTheme:!1}),a.props.selectTheme(e)},a.state={isBuilding:!1,themesToPickFrom:{},choixTheme:!1,allThemes:ie(),isLoaded:!1},a}return Object(p.a)(n,[{key:"render",value:function(){var e,t;return i.a.createElement("div",{className:"d-flex flex-column shadow-game flex-grow-1 p-3"},i.a.createElement("h2",null,"Th\xe8me".concat(null!==this.props.selectedTheme?"":"s"," : ")," ",null!==(e=null===(t=this.props.selectedTheme)||void 0===t?void 0:t.name)&&void 0!==e?e:""),i.a.createElement("div",{className:"d-flex justify-content-around"},Object.keys(this.state.themesToPickFrom).length>0&&!this.state.isBuilding?i.a.createElement(g.a,{variant:"outline-primary",onClick:this.displayThemes},"Selectionner un th\xe8me"):i.a.createElement(me,{isBuilding:this.state.isBuilding,setIsBuilding:this.setIsBuilding,addBuildingThemes:this.addBuildingThemes,allThemes:this.state.allThemes})),i.a.createElement("div",null,(this.state.choixTheme||this.state.isBuilding)&&i.a.createElement(ce,{validateList:this.addBuildingThemes,finalizeBuilding:this.finalizeBuilding,selectTheme:this.selectTheme,themesToPickFrom:this.state.themesToPickFrom,removeThemeFromList:this.removeThemeFromList,isBuilding:this.state.isBuilding})))}}]),n}(i.a.Component);function he(){var e=Object(I.a)(["\n    height: auto;\n    min-height: 100px;\n    font-size: 1.5rem;\n"]);return he=function(){return e},e}function pe(){var e=Object(I.a)(["\n    display: grid;\n    grid-gap: 1rem;\n    grid-template-columns: repeat(auto-fit, minmax(40%, 1fr));\n    grid-auto-rows: 1fr;\n    padding: 40px;\n"]);return pe=function(){return e},e}var ve=N.a.div(pe()),fe=Object(N.a)(g.a)(he()),be=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),a=[e[n],e[t]];e[t]=a[0],e[n]=a[1]}return e},Ee=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(fe,{variant:"outline-success","data-bonne-reponse":!0,onClick:e.answer},"Oui"),i.a.createElement(fe,{variant:"outline-danger","data-bonne-reponse":!1,onClick:e.answer},"Non"))},ge=function(e){Object(v.a)(n,e);var t=Object(f.a)(n);function n(e){var a;Object(h.a)(this,n),(a=t.call(this)).revealAnswer=function(e){var t="true"===e.target.dataset.bonneReponse;a.setState({isAnswered:!0},(function(){setTimeout((function(){return a.props.answer(t)}),1e3)}))};var i="duo"===e.mode.name?[e.question.autreReponses.split(";")[0]]:e.question.autreReponses.split(";");return a.state={isAnswered:!1,Reponses:be([e.question.bonneReponse].concat(Object(V.a)(i)))},a}return Object(p.a)(n,[{key:"setVariantButtonOnAnswered",value:function(e){var t,n;return this.state.isAnswered?null!==(t=e===(null===(n=this.props.question)||void 0===n?void 0:n.bonneReponse))&&void 0!==t&&t?"success":"danger":"outline-secondary"}},{key:"render",value:function(){var e=this;return this.state.Reponses.map((function(t){var n,a,s;return i.a.createElement(fe,{key:t,variant:e.setVariantButtonOnAnswered(t),"data-bonne-reponse":null!==(n=t===(null===(a=e.props)||void 0===a||null===(s=a.question)||void 0===s?void 0:s.bonneReponse))&&void 0!==n&&n,onClick:e.revealAnswer},t)}))}}]),n}(i.a.Component),qe=function(e){return i.a.createElement(ve,null,null!==e.mode&&"cash"!==e.mode.name?i.a.createElement(ge,{mode:e.mode,isAnswered:e.isAnswered,answer:e.answer,question:e.question}):i.a.createElement(Ee,{answer:e.answer}))},Te=n(105),xe=[{name:"cash",score:4},{name:"carre",score:2},{name:"duo",score:1}],Oe=function(e){var t=e.timer/e.baseTimer*100;return i.a.createElement("div",{className:"d-flex flex-column"},i.a.createElement(Te.a,{animated:!0,variant:t<=50?t<=25?"danger":"warning":"success",now:t,style:{minWidth:"100%",height:"5vh"},label:"".concat(e.timer,"s")}),i.a.createElement("div",{className:"d-flex justify-content-around m-3"},Object.keys(xe).map((function(t,n){return i.a.createElement(z,{className:xe[t].name,key:xe[t].name,onClick:function(){return e.setMode(xe[t])}},xe[t].name.toUpperCase())})),0===t&&i.a.createElement(g.a,{"data-bonne-reponse":!1,variant:"outline-danger",onClick:e.skip}," ","Passer"," ")))},Se=function(e){Object(v.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this)).setMode=function(e){a.setState({mode:e}),clearTimeout(a.timeout),clearInterval(a.interval)},a.launchTimer=function(){a.setState({questionPose:!0}),a.interval=setInterval((function(){a.setState({timer:a.state.timer-1})}),1e3),a.timeout=setTimeout((function(){clearInterval(a.interval)}),1e3*a.state.baseTimer)},a.answer=function(e){var t="true"===e.target.dataset.bonneReponse;a.props.finish(t,a.state.mode),a.setState({mode:null,answer:!1,questionPose:!1,timer:5})},a.state={timer:5,baseTimer:5,isAnswered:!1,questionPose:!1,mode:null},a}return Object(p.a)(n,[{key:"render",value:function(){var e;return i.a.createElement(P,null,!this.state.questionPose&&i.a.createElement("div",{className:"initialize"},this.props.canLaunch?i.a.createElement(g.a,{style:{height:"auto",width:"150px",minHeight:"100px",fontSize:"1.5rem"},variant:"outline-info",onClick:this.launchTimer},"Lancer"):i.a.createElement("h2",{className:"text-danger"},"Selectionne une \xe9quipe et un th\xe8me !")),this.state.questionPose&&null!==this.props.questionToDisplay&&i.a.createElement("div",{className:"text-center"},i.a.createElement("h2",null,null===(e=this.props.questionToDisplay)||void 0===e?void 0:e.question)),null===this.state.mode&&this.state.questionPose&&i.a.createElement(Oe,{baseTimer:this.state.baseTimer,timer:this.state.timer,setMode:this.setMode,skip:this.answer}),null!==this.state.mode&&i.a.createElement(qe,{answer:this.answer,mode:this.state.mode,isAnswered:this.state.isAnswered,question:this.props.questionToDisplay}))}}]),n}(i.a.Component),je=function(e){Object(v.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(h.a)(this,n),(e=t.call(this)).initialize=function(){return{selectedEquipe:null,selectedTheme:null,questions:[],currentQuestionIndex:0}},e.selectTheme=function(t){var n=ne(t.id),a=Object.keys(n).map((function(e){return n[e]}));e.updateStateAndSave({selectedTheme:t,questions:a,currentQuestionIndex:0})},e.selectEquipe=function(t){e.updateStateAndSave({selectedEquipe:t})},e.finish=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,a=e.setNewScore(t,n);a=Object(S.a)(Object(S.a)({},a),e.state.currentQuestionIndex!==e.state.questions.length-1?e.changeQuestionAndRemoveQuestionFromArray():e.initialize()),e.updateStateAndSave(a)},e.giveBonusOrMalusSelectedEquipe=function(t){t.stopPropagation(),console.log(t.target.dataset.idEquipe);var n=e.state.equipes[t.target.dataset.idEquipe];n.score+=parseInt(t.target.dataset.value),e.updateStateAndSave({equipes:Object(S.a)(Object(S.a)({},e.state.equipes),{},Object(O.a)({},n.id,n))})},e.setNewScore=function(){var t,n,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1?arguments[1]:void 0,s=e.state.equipes[null===(t=e.state)||void 0===t||null===(n=t.selectedEquipe)||void 0===n?void 0:n.id];return s.score=a?s.score+i.score:s.score,{equipes:Object(S.a)(Object(S.a)({},e.state.equipes),{},Object(O.a)({},e.state.selectedEquipe.id,s)),selectedEquipe:s}},e.changeQuestionAndRemoveQuestionFromArray=function(){return{currentQuestionIndex:Math.min(e.state.currentQuestionIndex+1,e.state.questions.length-1)}},e.state={equipes:y(),selectedEquipe:null,selectedTheme:null,questions:[],currentQuestionIndex:0,isLoaded:!1},e}return Object(p.a)(n,[{key:"updateStateAndSave",value:function(e){var t=this;this.setState(Object(S.a)({},e),(function(){localStorage.setItem("game",JSON.stringify(t.state))}))}},{key:"componentDidMount",value:function(){this.loadGameStateFromLocalStorageIfExistElseCreate()}},{key:"loadGameStateFromLocalStorageIfExistElseCreate",value:function(){var e,t=null!==(e=JSON.parse(localStorage.getItem("game")))&&void 0!==e?e:this.initialize();this.setState(Object(S.a)({isLoaded:!0},t))}},{key:"render",value:function(){return this.state.isLoaded?i.a.createElement(q.a,{fluid:!0,className:"d-flex flex-column"},i.a.createElement("div",{className:"d-flex flex-row justify-content-between mt-4"},i.a.createElement(x.a,{md:"3",className:"d-flex"},i.a.createElement(de,{selectedTheme:this.state.selectedTheme,selectTheme:this.selectTheme})),i.a.createElement(x.a,null,i.a.createElement(Se,{theme:this.state.theme,equipe:this.state.selectedEquipe,canLaunch:null!==this.state.selectedTheme&&null!==this.state.selectedEquipe,questionToDisplay:this.state.questions[this.state.currentQuestionIndex],finish:this.finish})),i.a.createElement(x.a,{md:"2",className:"shadow-game d-flex rounded bg-ligth"},i.a.createElement(oe,{equipes:this.state.equipes,selectEquipe:this.selectEquipe,selectedEquipe:this.state.selectedEquipe,giveBonusOrMalusSelectedEquipe:this.giveBonusOrMalusSelectedEquipe})))):i.a.createElement("h2",null," En chargement ")}}]),n}(i.a.Component);var ke=function(){return i.a.createElement("div",{className:"d-flex flex-column flex-grow-1"},i.a.createElement(d,null),i.a.createElement(r.c,null,i.a.createElement(r.a,{path:"/admin",component:le}),i.a.createElement(r.a,{component:je})))};n(92);window.onbeforeunload=function(e){return(e=e||window.event)&&(e.returnValue="Sure?"),"Sure?"},l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(m.a,{basename:"quizzdiscord"},i.a.createElement(ke,null))),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.fab5092e.chunk.js.map